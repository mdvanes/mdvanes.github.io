import{S as ne,i as ee,s as oe,k as o,q as n,a as i,l as p,m as l,r as e,h as t,c as u,n as f,b as c,F as a,G as Ut}from"./index.f054af2f.js";function pe(Bn){let I,ua,Ss,q,da,gs,C,Jn=`<code class="language-typescript"><span class="token keyword">const</span> add <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">const</span> sum <span class="token operator">=</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>
  window<span class="token punctuation">.</span>z <span class="token operator">=</span> sum<span class="token punctuation">;</span>
  <span class="token keyword">return</span> sum<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code>`,As,K,ka,Ls,S,Nn=`<code class="language-typescript"><span class="token keyword">const</span> heroes<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Dent'</span><span class="token punctuation">,</span> <span class="token string">'Prefect'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">addHero</span> <span class="token operator">=</span> <span class="token punctuation">(</span>h<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
  heroes<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>h<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

<span class="token function">addHero</span><span class="token punctuation">(</span><span class="token string">'Marvin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code>`,zs,d,fa,ts,ha,ma,ns,ya,wa,es,va,ba,os,Ea,_a,ps,Ta,Ia,ls,Ha,xa,rs,Ma,Oa,cs,Da,Pa,is,ja,Ca,us,Sa,ga,Rs,H,Aa,ds,La,za,Fs,g,Gn=`<code class="language-typescript"><span class="token keyword">const</span> heroes<span class="token operator">:</span> <span class="token keyword">readonly</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Dent'</span><span class="token punctuation">,</span> <span class="token string">'Prefect'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">addHero</span> <span class="token operator">=</span> <span class="token punctuation">(</span>h<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
  heroes<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>h<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// TS2339 property 'push' does not exist on type 'readonly string[]'</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

<span class="token function">addHero</span><span class="token punctuation">(</span><span class="token string">'Marvin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code>`,Bs,Y,Ra,Js,b,Fa,ks,Ba,Ja,fs,Na,Ga,Ns,A,Wn=`<code class="language-typescript"><span class="token keyword">type</span> <span class="token class-name">Heroes</span> <span class="token operator">=</span> <span class="token keyword">readonly</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> heroes<span class="token operator">:</span> Heroes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Dent'</span><span class="token punctuation">,</span> <span class="token string">'Prefect'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">addHero</span> <span class="token operator">=</span> <span class="token punctuation">(</span>hs<span class="token operator">:</span> Heroes<span class="token punctuation">,</span> h<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token operator">...</span>hs<span class="token punctuation">,</span> h<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> newHeroes<span class="token operator">:</span> Heroes <span class="token operator">=</span> <span class="token function">addHero</span><span class="token punctuation">(</span>heroes<span class="token punctuation">,</span> <span class="token string">'Marvin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code>`,Gs,E,Wa,hs,qa,Ka,ms,Ya,Ua,Ws,L,qn=`<code class="language-typescript"><span class="token keyword">interface</span> <span class="token class-name">Hero</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">readonly</span> name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">const</span> dent<span class="token operator">:</span> Hero <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  name<span class="token operator">:</span> <span class="token string">'Dent'</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">updateName</span> <span class="token operator">=</span> <span class="token punctuation">(</span>h<span class="token operator">:</span> Hero<span class="token punctuation">,</span> n<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
  <span class="token comment">// h.name = n; // TS2540 cannot assign to 'name' because it is a read-only property</span>
  <span class="token comment">// return h;</span>
  <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
    <span class="token operator">...</span>h<span class="token punctuation">,</span>
    name<span class="token operator">:</span> n
  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> newDent <span class="token operator">=</span> <span class="token function">updateName</span><span class="token punctuation">(</span>dent<span class="token punctuation">,</span> <span class="token string">'Arthur'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code>`,qs,U,Qa,Ks,h,Va,ys,Xa,Za,ws,$a,st,vs,at,tt,bs,nt,et,Ys,z,Kn=`<code class="language-ts"><span class="token keyword">const</span> <span class="token function-variable function">addHeroToStart</span> <span class="token operator">=</span> <span class="token punctuation">(</span>hs<span class="token operator">:</span> Heroes<span class="token punctuation">,</span> h<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
  <span class="token comment">// Instead of: hs.unshift(h); return hs;</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span>h<span class="token punctuation">,</span> <span class="token operator">...</span>hs<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">lastHero</span> <span class="token operator">=</span> <span class="token punctuation">(</span>hs<span class="token operator">:</span> Heroes<span class="token punctuation">,</span> h<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
  <span class="token comment">// Instead of: return hs.pop();</span>
  <span class="token keyword">return</span> hs<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">firstHero</span> <span class="token operator">=</span> <span class="token punctuation">(</span>hs<span class="token operator">:</span> Heroes<span class="token punctuation">,</span> h<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
  <span class="token comment">// Instead of: return hs.shift();</span>
  <span class="token keyword">return</span> hs<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code>`,Us,m,ot,Es,pt,lt,_s,rt,ct,Ts,it,ut,Qs,R,Yn=`<code class="language-ts"><span class="token comment">// mutating method:</span>
hs<span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> hs<span class="token punctuation">;</span>
<span class="token comment">// copying method:</span>
<span class="token keyword">return</span> hs<span class="token punctuation">.</span><span class="token function">toReversed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code>`,Vs,Q,dt,Xs,V,kt,Zs,y,ft,Is,ht,mt,Hs,yt,wt,xs,vt,bt,$s,x,Et,F,_t,Tt,sa,X,It,aa,M,Ht,B,xt,Mt,ta,w,Ot,J,Dt,Pt,N,jt,Ct,Ms,St,gt,na,G,Un=`<code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> produce <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'immer'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> nextState <span class="token operator">=</span> <span class="token function">produce</span><span class="token punctuation">(</span>baseState<span class="token punctuation">,</span> <span class="token punctuation">(</span>draft<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
  draft<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>done <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  draft<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> title<span class="token operator">:</span> <span class="token string">'Tweet about it'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code>`,ea,v,At,Os,Lt,zt,Ds,Rt,Ft,Ps,Bt,Jt,oa,Z,Nt,pa,$,Gt,la,T,js,Wt,qt,W,Kt,Yt;return{c(){I=o("p"),ua=n("The previous article explained what side effects are and why it is important to prevent them and to write pure functions."),Ss=i(),q=o("p"),da=n("The example of a function with a side effect was:"),gs=i(),C=o("pre"),As=i(),K=o("p"),ka=n("Let’s look at a similar example, but without the global window variable. Instead, an array that is declared outside the function is updated:"),Ls=i(),S=o("pre"),zs=i(),d=o("p"),fa=n("Although the "),ts=o("code"),ha=n("heroes"),ma=n(" array is declared with "),ns=o("code"),ya=n("const"),wa=n(", that just means that it can’t be reassigned, e.g. with "),es=o("code"),va=n("heroes = []"),ba=n(". In fact, the array itself can still be "),os=o("em"),Ea=n("mutated"),_a=n(". This is the default behavior for data structures in JavaScript. That is why "),ps=o("code"),Ta=n("addHero"),Ia=n(" causes a side-effect, it mutates the "),ls=o("code"),Ha=n("heroes"),xa=n(" array that was declared outside the scope of the function, so when the "),rs=o("code"),Ma=n("heroes"),Oa=n(" array is accessed after calling "),cs=o("code"),Da=n("addHero"),Pa=n(", it "),is=o("em"),ja=n("will"),Ca=n(" contain the value "),us=o("code"),Sa=n("Marvin"),ga=n("."),Rs=i(),H=o("p"),Aa=n("Typescript offers the "),ds=o("code"),La=n("readonly"),za=n(" modifier to make the compiler prevent calling mutating methods on a data structure:"),Fs=i(),g=o("pre"),Bs=i(),Y=o("h2"),Ra=n("Copying instead of mutating"),Js=i(),b=o("p"),Fa=n("Instead you should create a new array and return that inside of "),ks=o("code"),Ba=n("addHero"),Ja=n(". You could create an intermediary array in "),fs=o("code"),Na=n("addHero"),Ga=n(" and push to it, and then return it. In functional style you would do this without an intermediary variable. TypeScript has a very readable way to do this, with the spread operator:"),Ns=i(),A=o("pre"),Gs=i(),E=o("p"),Wa=n("This copies the values of the "),hs=o("code"),qa=n("heroes"),Ka=n(" array and the new value to a new array, preventing side effects on the "),ms=o("code"),Ya=n("heroes"),Ua=n(" array. This also applies to objects:"),Ws=i(),L=o("pre"),qs=i(),U=o("h2"),Qa=n("Mutating methods"),Ks=i(),h=o("p"),Va=n("The mutating methods "),ys=o("code"),Xa=n("pop"),Za=n(", "),ws=o("code"),$a=n("shift"),st=n(", and "),vs=o("code"),at=n("unshift"),tt=n(" on arrays can all be solved with similar solutions to "),bs=o("code"),nt=n("push"),et=n(":"),Ys=i(),z=o("pre"),Us=i(),m=o("p"),ot=n("It it also possible to write similar solutions for the mutating methods "),Es=o("code"),pt=n("sort"),lt=n(", "),_s=o("code"),rt=n("splice"),ct=n(", and "),Ts=o("code"),it=n("reverse"),ut=n(". But we don’t have to! Modern browsers benefit from new copying versions of these methods. It is just a matter of replacing them and returning directly:"),Qs=i(),R=o("pre"),Vs=i(),Q=o("p"),dt=n("There are also other mutating methods:"),Xs=i(),V=o("h2"),kt=n("Freezing"),Zs=i(),y=o("p"),ft=n("Besides marking properties on objects as "),Is=o("code"),ht=n("readonly"),mt=n(" to let the TypeScript compliler notice unintended mutations, we can also add runtime protection by sealing or freezing objects with "),Hs=o("code"),yt=n("Object.seal()"),wt=n(" or "),xs=o("code"),vt=n("Object.freeze()"),bt=n(". Freezing offers the most protection of the two: existing properties are made immutable and can’t be reassigned. It will fail silently, or when called from a strict mode context, it will throw a TypeError."),$s=i(),x=o("p"),Et=n("This works for Objects as well as Arrays, for the complete documentation and examples see "),F=o("a"),_t=n("MDN"),Tt=n("."),sa=i(),X=o("h2"),It=n("Libraries"),aa=i(),M=o("p"),Ht=n("Instead of freezing objects and arrays manually, there are libraries that provide immutable data structures. E.g. the aptly named "),B=o("a"),xt=n("Immutable"),Mt=n(" provides several collection types, like Map. ECMAScript natively already has a collection type Map, but that one is mutable. Immutable’s Map returns a new Map when the original Map was modified, for instance by setting a property."),ta=i(),w=o("p"),Ot=n("Another library is "),J=o("a"),Dt=n("Immer"),Pt=n(". It is used internally in e.g. "),N=o("a"),jt=n("Redux Toolkit"),Ct=n(". It converts data structures to be immutable "),Ms=o("em"),St=n("while preserving the mutable methods"),gt=n(". To clarify:"),na=i(),G=o("pre"),ea=i(),v=o("p"),At=n("In this example, "),Os=o("code"),Lt=n("draft"),zt=n(" is "),Ds=o("strong"),Rt=n("not"),Ft=n(" mutable. It was made immutable by Immer. But the method "),Ps=o("code"),Bt=n("push"),Jt=n(" still updates it like you would expect from mutable object. It does this by internally copying the object."),oa=i(),Z=o("p"),Nt=n("While the library itself is solid, it introduces one drawback that you should be very wary of in my opinion: someone who is not familiar with Immer might be confused and think this object is mutable. At a bad moment, it may even be copy-pasted to a place that is not protected by Immer. That’s why I would not disregard the more verbose, but explicitly immutable, alternatives."),pa=i(),$=o("p"),Gt=n("In the next chapter we will look at the functional operators."),la=i(),T=o("p"),js=o("em"),Wt=n("Acknowledgement:"),qt=n(" this article was inspired by the course "),W=o("a"),Kt=n("Functional-Light JavaScript, v3 by Kyle Simpson"),Yt=n("."),this.h()},l(s){I=p(s,"P",{});var r=l(I);ua=e(r,"The previous article explained what side effects are and why it is important to prevent them and to write pure functions."),r.forEach(t),Ss=u(s),q=p(s,"P",{});var Qt=l(q);da=e(Qt,"The example of a function with a side effect was:"),Qt.forEach(t),gs=u(s),C=p(s,"PRE",{class:!0});var Qn=l(C);Qn.forEach(t),As=u(s),K=p(s,"P",{});var Vt=l(K);ka=e(Vt,"Let’s look at a similar example, but without the global window variable. Instead, an array that is declared outside the function is updated:"),Vt.forEach(t),Ls=u(s),S=p(s,"PRE",{class:!0});var Vn=l(S);Vn.forEach(t),zs=u(s),d=p(s,"P",{});var k=l(d);fa=e(k,"Although the "),ts=p(k,"CODE",{});var Xt=l(ts);ha=e(Xt,"heroes"),Xt.forEach(t),ma=e(k," array is declared with "),ns=p(k,"CODE",{});var Zt=l(ns);ya=e(Zt,"const"),Zt.forEach(t),wa=e(k,", that just means that it can’t be reassigned, e.g. with "),es=p(k,"CODE",{});var $t=l(es);va=e($t,"heroes = []"),$t.forEach(t),ba=e(k,". In fact, the array itself can still be "),os=p(k,"EM",{});var sn=l(os);Ea=e(sn,"mutated"),sn.forEach(t),_a=e(k,". This is the default behavior for data structures in JavaScript. That is why "),ps=p(k,"CODE",{});var an=l(ps);Ta=e(an,"addHero"),an.forEach(t),Ia=e(k," causes a side-effect, it mutates the "),ls=p(k,"CODE",{});var tn=l(ls);Ha=e(tn,"heroes"),tn.forEach(t),xa=e(k," array that was declared outside the scope of the function, so when the "),rs=p(k,"CODE",{});var nn=l(rs);Ma=e(nn,"heroes"),nn.forEach(t),Oa=e(k," array is accessed after calling "),cs=p(k,"CODE",{});var en=l(cs);Da=e(en,"addHero"),en.forEach(t),Pa=e(k,", it "),is=p(k,"EM",{});var on=l(is);ja=e(on,"will"),on.forEach(t),Ca=e(k," contain the value "),us=p(k,"CODE",{});var pn=l(us);Sa=e(pn,"Marvin"),pn.forEach(t),ga=e(k,"."),k.forEach(t),Rs=u(s),H=p(s,"P",{});var ra=l(H);Aa=e(ra,"Typescript offers the "),ds=p(ra,"CODE",{});var ln=l(ds);La=e(ln,"readonly"),ln.forEach(t),za=e(ra," modifier to make the compiler prevent calling mutating methods on a data structure:"),ra.forEach(t),Fs=u(s),g=p(s,"PRE",{class:!0});var Xn=l(g);Xn.forEach(t),Bs=u(s),Y=p(s,"H2",{});var rn=l(Y);Ra=e(rn,"Copying instead of mutating"),rn.forEach(t),Js=u(s),b=p(s,"P",{});var ss=l(b);Fa=e(ss,"Instead you should create a new array and return that inside of "),ks=p(ss,"CODE",{});var cn=l(ks);Ba=e(cn,"addHero"),cn.forEach(t),Ja=e(ss,". You could create an intermediary array in "),fs=p(ss,"CODE",{});var un=l(fs);Na=e(un,"addHero"),un.forEach(t),Ga=e(ss," and push to it, and then return it. In functional style you would do this without an intermediary variable. TypeScript has a very readable way to do this, with the spread operator:"),ss.forEach(t),Ns=u(s),A=p(s,"PRE",{class:!0});var Zn=l(A);Zn.forEach(t),Gs=u(s),E=p(s,"P",{});var as=l(E);Wa=e(as,"This copies the values of the "),hs=p(as,"CODE",{});var dn=l(hs);qa=e(dn,"heroes"),dn.forEach(t),Ka=e(as," array and the new value to a new array, preventing side effects on the "),ms=p(as,"CODE",{});var kn=l(ms);Ya=e(kn,"heroes"),kn.forEach(t),Ua=e(as," array. This also applies to objects:"),as.forEach(t),Ws=u(s),L=p(s,"PRE",{class:!0});var $n=l(L);$n.forEach(t),qs=u(s),U=p(s,"H2",{});var fn=l(U);Qa=e(fn,"Mutating methods"),fn.forEach(t),Ks=u(s),h=p(s,"P",{});var _=l(h);Va=e(_,"The mutating methods "),ys=p(_,"CODE",{});var hn=l(ys);Xa=e(hn,"pop"),hn.forEach(t),Za=e(_,", "),ws=p(_,"CODE",{});var mn=l(ws);$a=e(mn,"shift"),mn.forEach(t),st=e(_,", and "),vs=p(_,"CODE",{});var yn=l(vs);at=e(yn,"unshift"),yn.forEach(t),tt=e(_," on arrays can all be solved with similar solutions to "),bs=p(_,"CODE",{});var wn=l(bs);nt=e(wn,"push"),wn.forEach(t),et=e(_,":"),_.forEach(t),Ys=u(s),z=p(s,"PRE",{class:!0});var se=l(z);se.forEach(t),Us=u(s),m=p(s,"P",{});var O=l(m);ot=e(O,"It it also possible to write similar solutions for the mutating methods "),Es=p(O,"CODE",{});var vn=l(Es);pt=e(vn,"sort"),vn.forEach(t),lt=e(O,", "),_s=p(O,"CODE",{});var bn=l(_s);rt=e(bn,"splice"),bn.forEach(t),ct=e(O,", and "),Ts=p(O,"CODE",{});var En=l(Ts);it=e(En,"reverse"),En.forEach(t),ut=e(O,". But we don’t have to! Modern browsers benefit from new copying versions of these methods. It is just a matter of replacing them and returning directly:"),O.forEach(t),Qs=u(s),R=p(s,"PRE",{class:!0});var ae=l(R);ae.forEach(t),Vs=u(s),Q=p(s,"P",{});var _n=l(Q);dt=e(_n,"There are also other mutating methods:"),_n.forEach(t),Xs=u(s),V=p(s,"H2",{});var Tn=l(V);kt=e(Tn,"Freezing"),Tn.forEach(t),Zs=u(s),y=p(s,"P",{});var D=l(y);ft=e(D,"Besides marking properties on objects as "),Is=p(D,"CODE",{});var In=l(Is);ht=e(In,"readonly"),In.forEach(t),mt=e(D," to let the TypeScript compliler notice unintended mutations, we can also add runtime protection by sealing or freezing objects with "),Hs=p(D,"CODE",{});var Hn=l(Hs);yt=e(Hn,"Object.seal()"),Hn.forEach(t),wt=e(D," or "),xs=p(D,"CODE",{});var xn=l(xs);vt=e(xn,"Object.freeze()"),xn.forEach(t),bt=e(D,". Freezing offers the most protection of the two: existing properties are made immutable and can’t be reassigned. It will fail silently, or when called from a strict mode context, it will throw a TypeError."),D.forEach(t),$s=u(s),x=p(s,"P",{});var ca=l(x);Et=e(ca,"This works for Objects as well as Arrays, for the complete documentation and examples see "),F=p(ca,"A",{href:!0,rel:!0});var Mn=l(F);_t=e(Mn,"MDN"),Mn.forEach(t),Tt=e(ca,"."),ca.forEach(t),sa=u(s),X=p(s,"H2",{});var On=l(X);It=e(On,"Libraries"),On.forEach(t),aa=u(s),M=p(s,"P",{});var ia=l(M);Ht=e(ia,"Instead of freezing objects and arrays manually, there are libraries that provide immutable data structures. E.g. the aptly named "),B=p(ia,"A",{href:!0,rel:!0});var Dn=l(B);xt=e(Dn,"Immutable"),Dn.forEach(t),Mt=e(ia," provides several collection types, like Map. ECMAScript natively already has a collection type Map, but that one is mutable. Immutable’s Map returns a new Map when the original Map was modified, for instance by setting a property."),ia.forEach(t),ta=u(s),w=p(s,"P",{});var P=l(w);Ot=e(P,"Another library is "),J=p(P,"A",{href:!0,rel:!0});var Pn=l(J);Dt=e(Pn,"Immer"),Pn.forEach(t),Pt=e(P,". It is used internally in e.g. "),N=p(P,"A",{href:!0,rel:!0});var jn=l(N);jt=e(jn,"Redux Toolkit"),jn.forEach(t),Ct=e(P,". It converts data structures to be immutable "),Ms=p(P,"EM",{});var Cn=l(Ms);St=e(Cn,"while preserving the mutable methods"),Cn.forEach(t),gt=e(P,". To clarify:"),P.forEach(t),na=u(s),G=p(s,"PRE",{class:!0});var te=l(G);te.forEach(t),ea=u(s),v=p(s,"P",{});var j=l(v);At=e(j,"In this example, "),Os=p(j,"CODE",{});var Sn=l(Os);Lt=e(Sn,"draft"),Sn.forEach(t),zt=e(j," is "),Ds=p(j,"STRONG",{});var gn=l(Ds);Rt=e(gn,"not"),gn.forEach(t),Ft=e(j," mutable. It was made immutable by Immer. But the method "),Ps=p(j,"CODE",{});var An=l(Ps);Bt=e(An,"push"),An.forEach(t),Jt=e(j," still updates it like you would expect from mutable object. It does this by internally copying the object."),j.forEach(t),oa=u(s),Z=p(s,"P",{});var Ln=l(Z);Nt=e(Ln,"While the library itself is solid, it introduces one drawback that you should be very wary of in my opinion: someone who is not familiar with Immer might be confused and think this object is mutable. At a bad moment, it may even be copy-pasted to a place that is not protected by Immer. That’s why I would not disregard the more verbose, but explicitly immutable, alternatives."),Ln.forEach(t),pa=u(s),$=p(s,"P",{});var zn=l($);Gt=e(zn,"In the next chapter we will look at the functional operators."),zn.forEach(t),la=u(s),T=p(s,"P",{});var Cs=l(T);js=p(Cs,"EM",{});var Rn=l(js);Wt=e(Rn,"Acknowledgement:"),Rn.forEach(t),qt=e(Cs," this article was inspired by the course "),W=p(Cs,"A",{href:!0,rel:!0});var Fn=l(W);Kt=e(Fn,"Functional-Light JavaScript, v3 by Kyle Simpson"),Fn.forEach(t),Yt=e(Cs,"."),Cs.forEach(t),this.h()},h(){f(C,"class","language-typescript"),f(S,"class","language-typescript"),f(g,"class","language-typescript"),f(A,"class","language-typescript"),f(L,"class","language-typescript"),f(z,"class","language-ts"),f(R,"class","language-ts"),f(F,"href","https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/freeze"),f(F,"rel","nofollow"),f(B,"href","https://immutable-js.com/"),f(B,"rel","nofollow"),f(J,"href","https://immerjs.github.io/immer/"),f(J,"rel","nofollow"),f(N,"href","https://redux-toolkit.js.org/"),f(N,"rel","nofollow"),f(G,"class","language-ts"),f(W,"href","https://frontendmasters.com/courses/functional-javascript-v3/"),f(W,"rel","nofollow")},m(s,r){c(s,I,r),a(I,ua),c(s,Ss,r),c(s,q,r),a(q,da),c(s,gs,r),c(s,C,r),C.innerHTML=Jn,c(s,As,r),c(s,K,r),a(K,ka),c(s,Ls,r),c(s,S,r),S.innerHTML=Nn,c(s,zs,r),c(s,d,r),a(d,fa),a(d,ts),a(ts,ha),a(d,ma),a(d,ns),a(ns,ya),a(d,wa),a(d,es),a(es,va),a(d,ba),a(d,os),a(os,Ea),a(d,_a),a(d,ps),a(ps,Ta),a(d,Ia),a(d,ls),a(ls,Ha),a(d,xa),a(d,rs),a(rs,Ma),a(d,Oa),a(d,cs),a(cs,Da),a(d,Pa),a(d,is),a(is,ja),a(d,Ca),a(d,us),a(us,Sa),a(d,ga),c(s,Rs,r),c(s,H,r),a(H,Aa),a(H,ds),a(ds,La),a(H,za),c(s,Fs,r),c(s,g,r),g.innerHTML=Gn,c(s,Bs,r),c(s,Y,r),a(Y,Ra),c(s,Js,r),c(s,b,r),a(b,Fa),a(b,ks),a(ks,Ba),a(b,Ja),a(b,fs),a(fs,Na),a(b,Ga),c(s,Ns,r),c(s,A,r),A.innerHTML=Wn,c(s,Gs,r),c(s,E,r),a(E,Wa),a(E,hs),a(hs,qa),a(E,Ka),a(E,ms),a(ms,Ya),a(E,Ua),c(s,Ws,r),c(s,L,r),L.innerHTML=qn,c(s,qs,r),c(s,U,r),a(U,Qa),c(s,Ks,r),c(s,h,r),a(h,Va),a(h,ys),a(ys,Xa),a(h,Za),a(h,ws),a(ws,$a),a(h,st),a(h,vs),a(vs,at),a(h,tt),a(h,bs),a(bs,nt),a(h,et),c(s,Ys,r),c(s,z,r),z.innerHTML=Kn,c(s,Us,r),c(s,m,r),a(m,ot),a(m,Es),a(Es,pt),a(m,lt),a(m,_s),a(_s,rt),a(m,ct),a(m,Ts),a(Ts,it),a(m,ut),c(s,Qs,r),c(s,R,r),R.innerHTML=Yn,c(s,Vs,r),c(s,Q,r),a(Q,dt),c(s,Xs,r),c(s,V,r),a(V,kt),c(s,Zs,r),c(s,y,r),a(y,ft),a(y,Is),a(Is,ht),a(y,mt),a(y,Hs),a(Hs,yt),a(y,wt),a(y,xs),a(xs,vt),a(y,bt),c(s,$s,r),c(s,x,r),a(x,Et),a(x,F),a(F,_t),a(x,Tt),c(s,sa,r),c(s,X,r),a(X,It),c(s,aa,r),c(s,M,r),a(M,Ht),a(M,B),a(B,xt),a(M,Mt),c(s,ta,r),c(s,w,r),a(w,Ot),a(w,J),a(J,Dt),a(w,Pt),a(w,N),a(N,jt),a(w,Ct),a(w,Ms),a(Ms,St),a(w,gt),c(s,na,r),c(s,G,r),G.innerHTML=Un,c(s,ea,r),c(s,v,r),a(v,At),a(v,Os),a(Os,Lt),a(v,zt),a(v,Ds),a(Ds,Rt),a(v,Ft),a(v,Ps),a(Ps,Bt),a(v,Jt),c(s,oa,r),c(s,Z,r),a(Z,Nt),c(s,pa,r),c(s,$,r),a($,Gt),c(s,la,r),c(s,T,r),a(T,js),a(js,Wt),a(T,qt),a(T,W),a(W,Kt),a(T,Yt)},p:Ut,i:Ut,o:Ut,d(s){s&&t(I),s&&t(Ss),s&&t(q),s&&t(gs),s&&t(C),s&&t(As),s&&t(K),s&&t(Ls),s&&t(S),s&&t(zs),s&&t(d),s&&t(Rs),s&&t(H),s&&t(Fs),s&&t(g),s&&t(Bs),s&&t(Y),s&&t(Js),s&&t(b),s&&t(Ns),s&&t(A),s&&t(Gs),s&&t(E),s&&t(Ws),s&&t(L),s&&t(qs),s&&t(U),s&&t(Ks),s&&t(h),s&&t(Ys),s&&t(z),s&&t(Us),s&&t(m),s&&t(Qs),s&&t(R),s&&t(Vs),s&&t(Q),s&&t(Xs),s&&t(V),s&&t(Zs),s&&t(y),s&&t($s),s&&t(x),s&&t(sa),s&&t(X),s&&t(aa),s&&t(M),s&&t(ta),s&&t(w),s&&t(na),s&&t(G),s&&t(ea),s&&t(v),s&&t(oa),s&&t(Z),s&&t(pa),s&&t($),s&&t(la),s&&t(T)}}}const re={title:"FP & TS chapter 2: Immutability",cover:"",date:"04-01-2024",category:"webdevelopment",tags:["webdevelopment","FP & TS"],preview:`The previous article explained what side effects are and why it is important to prevent them and to write pure functions.

The example of a function with a side effect was:`,previewHtml:"<p>The previous article explained what side effects are and why it is important to prevent them and to write pure functions.</p> <p>The example of a function with a side effect was:</p>"};class ce extends ne{constructor(I){super(),ee(this,I,null,pe,oe,{})}}export{ce as default,re as metadata};
